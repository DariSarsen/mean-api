{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../check-form.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/auth\"];\n};\nexport class RegComponent {\n  constructor(checkForm, toastr, auth, router) {\n    this.checkForm = checkForm;\n    this.toastr = toastr;\n    this.auth = auth;\n    this.router = router;\n    this.name = '', this.login = '', this.email = '', this.password = '';\n  }\n  ngOnInit() {}\n  userRegisterClick() {\n    const user = {\n      name: this.name,\n      login: this.login,\n      email: this.email,\n      password: this.password\n    };\n    if (!this.checkForm.checkName(user.name)) {\n      this.toastr.error('Field \"Name\" is required', '');\n      return false;\n    } else if (!this.checkForm.checkLogin(user.login)) {\n      this.toastr.error('Field \"Login\" is required', '');\n    } else if (!this.checkForm.checkEmail(user.email)) {\n      this.toastr.error('Field \"Email\" is required', '');\n      return false;\n    } else if (!this.checkForm.checkPassword(user.password)) {\n      this.toastr.error('Field \"Password\" is required', '');\n      return false;\n    }\n    console.log('Before subscribe');\n    this.auth.registerUser(user).subscribe({\n      next: data => {\n        console.log('Inside subscribe:', data);\n        if (!data.success) {\n          this.toastr.error(data.msg, '');\n          this.router.navigate(['/reg']);\n        } else {\n          this.toastr.success(data.msg, '');\n          this.router.navigate(['/auth']);\n        }\n      },\n      error: error => {\n        console.error('Ошибка при выполнении запроса:', error);\n      }\n    });\n    return false;\n  }\n}\n_class = RegComponent;\n_class.ɵfac = function RegComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.CheckFormService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-reg\"]],\n  decls: 28,\n  vars: 6,\n  consts: [[1, \"form-signin\", \"border\", \"shadow\", \"p-5\", \"text-center\"], [3, \"submit\"], [1, \"h2\", \"mb-5\", \"fw-normal\"], [1, \"form-floating\", \"mb-3\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"floatingInput\", \"placeholder\", \"Your name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"floatingInput\"], [\"type\", \"text\", \"name\", \"login\", \"id\", \"floatingInput\", \"placeholder\", \"Your login\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"email\", \"id\", \"floatingInput\", \"placeholder\", \"name@example.com\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-floating\"], [\"type\", \"text\", \"name\", \"password\", \"id\", \"floatingPassword\", \"placeholder\", \"Password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"floatingPassword\"], [1, \"checkbox\", \"my-3\", \"text-start\"], [\"type\", \"checkbox\", \"value\", \"remember-me\"], [\"type\", \"submit\", 1, \"w-100\", \"btn\", \"btn-lg\", \"btn-primary\", \"mb-4\"], [1, \"text-dark\", 3, \"routerLink\"]],\n  template: function RegComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"main\", 0)(1, \"form\", 1);\n      i0.ɵɵlistener(\"submit\", function RegComponent_Template_form_submit_1_listener() {\n        return ctx.userRegisterClick();\n      });\n      i0.ɵɵelementStart(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Please sign up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.name = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Name\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 3)(9, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.login = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"label\", 5);\n      i0.ɵɵtext(11, \"Login\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 3)(13, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function RegComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"label\", 5);\n      i0.ɵɵtext(15, \"Email address\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 8)(17, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function RegComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"label\", 10);\n      i0.ɵɵtext(19, \"Password\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 11)(21, \"label\");\n      i0.ɵɵelement(22, \"input\", 12);\n      i0.ɵɵtext(23, \" Remember me \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"button\", 13);\n      i0.ɵɵtext(25, \"Sign in\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"a\", 14);\n      i0.ɵɵtext(27, \"Already have an account?\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.login);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.email);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n    }\n  },\n  dependencies: [i4.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["RegComponent","constructor","checkForm","toastr","auth","router","name","login","email","password","ngOnInit","userRegisterClick","user","checkName","error","checkLogin","checkEmail","checkPassword","console","log","registerUser","subscribe","next","data","success","msg","navigate","i0","ɵɵdirectiveInject","i1","CheckFormService","i2","ToastrService","i3","AuthService","i4","Router","selectors","decls","vars","consts","template","RegComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","RegComponent_Template_form_submit_1_listener","ɵɵtext","ɵɵelementEnd","RegComponent_Template_input_ngModelChange_5_listener","$event","RegComponent_Template_input_ngModelChange_9_listener","RegComponent_Template_input_ngModelChange_13_listener","RegComponent_Template_input_ngModelChange_17_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpureFunction0","_c0"],"sources":["C:\\Users\\daris\\Documents\\,,,\\Projects\\mean-api\\front-end\\src\\app\\reg\\reg.component.ts","C:\\Users\\daris\\Documents\\,,,\\Projects\\mean-api\\front-end\\src\\app\\reg\\reg.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CheckFormService } from '../check-form.service';\nimport { AuthService } from '../auth.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-reg',\n  templateUrl: './reg.component.html',\n  styleUrls: ['./reg.component.css']\n})\nexport class RegComponent implements OnInit {\n\n  name: string;\n  login: string;\n  email: string;\n  password: string;\n\n  constructor(\n    private checkForm: CheckFormService,\n    private toastr: ToastrService,\n    private auth: AuthService,\n    private router: Router,\n  ){\n    this.name = '',\n    this.login = '',\n    this.email = '',\n    this.password = ''\n  }\n\n  ngOnInit(): void{}\n\n  userRegisterClick(){\n    const user = {\n      name: this.name,\n      login: this.login,\n      email: this.email,\n      password: this.password,\n    }\n    \n    if(!this.checkForm.checkName(user.name)){\n      this.toastr.error('Field \"Name\" is required', '');\n      return false\n    } else if (!this.checkForm.checkLogin(user.login)) {\n      this.toastr.error('Field \"Login\" is required', '');\n    } else if(!this.checkForm.checkEmail(user.email)){\n      this.toastr.error('Field \"Email\" is required', '');\n      return false\n    } else if(!this.checkForm.checkPassword(user.password)){\n      this.toastr.error('Field \"Password\" is required', '');\n      return false\n    }  \n\n    console.log('Before subscribe');\n    this.auth.registerUser(user).subscribe({\n      next: (data: any) => {\n        console.log('Inside subscribe:', data);\n        if (!data.success) {\n          this.toastr.error(data.msg, '');\n          this.router.navigate(['/reg']);\n        } else {\n          this.toastr.success(data.msg, '');\n          this.router.navigate(['/auth']);\n        }\n      },\n      error: (error: any) => {\n        console.error('Ошибка при выполнении запроса:', error);\n      }\n    });\n\n    return false;\n\n  };\n\n}\n","<main class=\"form-signin border shadow p-5 text-center\">\n    <form (submit)=\"userRegisterClick()\">\n      <h1 class=\"h2 mb-5 fw-normal\">Please sign up</h1>\n  \n      <div class=\"form-floating mb-3\">\n        <input type=\"text\" [(ngModel)]=\"name\" name=\"name\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Your name\">\n        <label for=\"floatingInput\">Name</label>\n      </div>\n      <div class=\"form-floating mb-3\">\n        <input type=\"text\" [(ngModel)]=\"login\" name=\"login\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Your login\">\n        <label for=\"floatingInput\">Login</label>\n      </div>\n      <div class=\"form-floating mb-3\">\n        <input type=\"text\" [(ngModel)]=\"email\"  name=\"email\" class=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\">\n        <label for=\"floatingInput\">Email address</label>\n      </div>\n      <div class=\"form-floating\">\n        <input type=\"text\" [(ngModel)]=\"password\" name=\"password\" class=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\">\n        <label for=\"floatingPassword\">Password</label>\n      </div>\n  \n      <div class=\"checkbox my-3 text-start\">\n        <label>\n          <input type=\"checkbox\" value=\"remember-me\"> Remember me\n        </label>\n      </div>\n      <button class=\"w-100 btn btn-lg btn-primary mb-4\" type=\"submit\">Sign in</button>\n      <a [routerLink]=\"['/auth']\" class=\"text-dark\">Already have an account?</a>\n    </form>\n\n  </main>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}